<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:acm="http://java.sun.com/jsf/composite/comp">
<ui:composition template="/templates/baseLayout.xhtml">
	<ui:define name="body">
		<section id="content">
			<h:form id="CatalogListForm" prependId="false">
				<h:panelGrid styleClass="wrapper" width="100%">
			    	<h:panelGrid columns="3" width="100%" columnClasses="threeColBlock fleft, threeColBlock fleft, threeColBlock fleft">
			    		<rich:panel id="Makes" header="Makes">
			    			<div id="manageCatalog">
			    				<rich:list id="MakesList" var="make" value="#{ctlCtrl.makesForCatList}" rowKeyVar="stat" type="unordered"
									onrowmouseover="document.getElementById('MakesList:#{stat}:Editor').style.visibility='visible';"
									onrowmouseout="document.getElementById('MakesList:#{stat}:Editor').style.visibility='hidden';">
									<h:panelGroup id="Editor" styleClass="fright" style="visibility: hidden;" rendered="#{make.persistent}">
										<a4j:commandButton image="/images/icons/edit.gif" render="group">
											<f:setPropertyActionListener value="#{make}" target="#{ctlCtrl.make}" />
											<f:setPropertyActionListener value="true" target="#{make.editable}" />																						
										</a4j:commandButton>
										<acm:spacer width="10"/>
										<a4j:commandButton image="/images/icons/trash.png" oncomplete="#{rich:component('MakeDelPopup')}.show();">
											<f:setPropertyActionListener value="#{make}" target="#{ctlCtrl.make}" />
										</a4j:commandButton>											
									</h:panelGroup>
									<h:panelGroup id="group">
										<rich:inplaceInput id="NewMake" showControls="true" defaultLabel="New Make Name - Ex: Acura"  
					                		value="#{make.name}" rendered="#{!make.persistent}">
					                		<a4j:ajax event="change" render="Makes,Models,Styles" listener="#{ctlCtrl.submitMakeFromList}"/>
					                	</rich:inplaceInput>
										<a4j:commandLink id="SelectMake" value="#{make.name}" render="Makes,Models,Styles"
											styleClass="#{ctlCtrl.make.name == make.name ? 'active' : ''}" rendered="#{make.persistent}">
											<f:setPropertyActionListener value="#{make}" target="#{ctlCtrl.make}" />
											<f:setPropertyActionListener value="" target="#{ctlCtrl.model}" />
										</a4j:commandLink>										
				                	</h:panelGroup>																		
								</rich:list>								
							</div>
			    		</rich:panel>
			    		<rich:panel id="Models" header="Models" styleClass="threeColBlock">
			    			<div id="manageCatalog">
								<rich:list id="ModelsList" var="model" value="#{ctlCtrl.make.modelsForCatList}" rowKeyVar="stat" type="unordered"
									onrowmouseover="document.getElementById('ModelsList:#{stat}:Editor').style.visibility='visible';"
									onrowmouseout="document.getElementById('ModelsList:#{stat}:Editor').style.visibility='hidden';">
									<h:panelGroup id="Editor" styleClass="fright" style="visibility: hidden;" rendered="#{model.persistent}">
										<a4j:commandButton image="/images/icons/edit.gif">
										</a4j:commandButton>
										<acm:spacer width="10"/>
										<a4j:commandButton image="/images/icons/trash.png" oncomplete="#{rich:component('ModelDelPopup')}.show();">
											<f:setPropertyActionListener value="#{model}" target="#{ctlCtrl.model}" />
										</a4j:commandButton>										
									</h:panelGroup>
									<rich:inplaceInput id="NewModel" showControls="true" defaultLabel="New Model Name - Ex: MDX"  
				                		value="#{model.name}" rendered="#{!model.persistent}">
				                		<a4j:ajax event="change" render="Models,Styles" listener="#{ctlCtrl.submitModelFromList}"/>
				                	</rich:inplaceInput>
									<a4j:commandLink id="SelectModel" value="#{model.name}" render="Models,Styles" 
										styleClass="#{ctlCtrl.model.name == model.name ? 'active' : ''}" rendered="#{model.persistent}">
										<f:setPropertyActionListener value="#{model}" target="#{ctlCtrl.model}" />
									</a4j:commandLink>									
								</rich:list>
							</div>
			    		</rich:panel>
			    		<rich:panel id="Styles" header="Styles" styleClass="threeColBlock">
			    			<div id="manageCatalog">
								<rich:list id="StylesList" var="style" value="#{ctlCtrl.model.stylesForCatList}" rowKeyVar="stat" type="unordered"
									onrowmouseover="document.getElementById('StylesList:#{stat}:Editor').style.visibility='visible';"
									onrowmouseout="document.getElementById('StylesList:#{stat}:Editor').style.visibility='hidden';">
									<h:panelGroup id="Editor" styleClass="fright" style="visibility: hidden;" rendered="#{style.persistent}">
										<a4j:commandButton image="/images/icons/edit.gif" render="SelectStyle,EditStyle">
										</a4j:commandButton>
										<acm:spacer width="10"/>
										<a4j:commandButton image="/images/icons/trash.png" oncomplete="#{rich:component('StyleDelPopup')}.show();">
											<f:setPropertyActionListener value="#{style}" target="#{ctlCtrl.style}" />
										</a4j:commandButton>										
									</h:panelGroup>
									<rich:inplaceInput id="NewStyle" showControls="true" defaultLabel="New Style Name - Ex: LXI"  
				                		value="#{style.name}" rendered="#{!style.persistent}">
				                		<a4j:ajax event="change" render="Styles" listener="#{ctlCtrl.submitStyleFromList}"/>
				                	</rich:inplaceInput>
				                	<a4j:commandLink id="SelectStyle" value="#{style.name}" render="Styles" 
										styleClass="#{ctlCtrl.style.name == style.name ? 'active' : ''}" rendered="#{style.persistent}">
										<f:setPropertyActionListener value="#{style}" target="#{ctlCtrl.style}" />
									</a4j:commandLink>									
								</rich:list>
							</div>
			    		</rich:panel>
			    	</h:panelGrid>
			    </h:panelGrid>	
			</h:form>			        	            
	    </section>
	    <h:form id="CatEditForm" prependId="false">	
	    	<rich:popupPanel id="MakeDelPopup" modal="true" autosized="true" domElementAttachment="parent">
				<h:panelGrid width="100%" styleClass="centerAlign" columnClasses="col-padding">
					<h:outputText value="Are you sure, you want to delete this Make?" />
					<h:outputText value="This would also delete all its corresponding Models and Styles." />
					<br/>
					<h:panelGroup>
						<a4j:commandButton styleClass="button1" value="Delete" action="#{ctlCtrl.deleteMake}" 
							oncomplete="#{rich:component('MakeDelPopup')}.hide();" render="Makes,Models,Styles">
				        </a4j:commandButton>
				        <acm:spacer width="10px;"/>
				        <a4j:commandButton styleClass="button1" value="Cancel" onclick="#{rich:component('MakeDelPopup')}.hide();" immediate="true">				            
				        </a4j:commandButton>
			        </h:panelGroup>			        				
				</h:panelGrid>
			</rich:popupPanel>
			<rich:popupPanel id="ModelDelPopup" modal="true" autosized="true" domElementAttachment="parent">
				<h:panelGrid width="100%" styleClass="centerAlign" columnClasses="col-padding, col-padding">
					<h:outputText value="Are you sure, you want to delete this Model?" />
					<h:outputText value="This would also delete all its corresponding Styles." />
					<br/>
					<h:panelGroup>
						<a4j:commandButton styleClass="button1" value="Delete" action="#{ctlCtrl.deleteModel}" 
							oncomplete="#{rich:component('ModelDelPopup')}.hide();" render="Models,Styles">
				        </a4j:commandButton>
				        <acm:spacer width="10px;"/>
				        <a4j:commandButton styleClass="button1" value="Cancel" onclick="#{rich:component('ModelDelPopup')}.hide();" immediate="true">				            
				        </a4j:commandButton>
			        </h:panelGroup>			        				
				</h:panelGrid>
			</rich:popupPanel>
			<rich:popupPanel id="StyleDelPopup" modal="true" autosized="true" domElementAttachment="parent">
				<h:panelGrid width="100%" styleClass="centerAlign" columnClasses="col-padding, col-padding">
					<h:outputText value="Are you sure, you want to delete this Style?" />										
					<br/>
					<h:panelGroup>
						<a4j:commandButton styleClass="button1" value="Delete" action="#{ctlCtrl.deleteStyle}" 
							oncomplete="#{rich:component('StyleDelPopup')}.hide();" render="Styles">
				        </a4j:commandButton>
				        <acm:spacer width="10px;"/>
				        <a4j:commandButton styleClass="button1" value="Cancel" onclick="#{rich:component('StyleDelPopup')}.hide();" immediate="true">				            
				        </a4j:commandButton>
			        </h:panelGroup>			        				
				</h:panelGrid>
			</rich:popupPanel>
		</h:form>
	</ui:define>
</ui:composition>     
</html>   	